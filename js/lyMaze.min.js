!function(a){a.fn.extend({lyMaze:function(e){for(var l=a(this).empty(),o=e.size[0],m=e.size[1],t='<table class="ly_maze" cellspacing="0" cellpadding="0">',z=0,c=0;o>c;c++){t+="<tr>";for(var d=0;m>d;d++){var s=e.data[z][2],n=e.data[z][3],r=e.data[z][4],L=e.data[z][5],i="";0==s&&(i+="top"),0==n&&(i+=" right"),0==r&&(i+=" bottom"),0==L&&(i+=" left"),t+=""==i?"<td></td>":'<td class="'+i+'"></td>',z++}t+="</tr>"}t+="</table>";var f=a(t),p=f.find("td");p.first().removeClass("left").addClass("on"),p.last().removeClass("right"),window.mazeLocal=[0,0],window.mazeLocalEle=p.eq(0),window.mazeStep=0,window.mazeOver=!1,a(window).unbind().keyup(function(a){if(!mazeOver){if(38==a.keyCode)1==e.data[mazeLocal[1]*o+mazeLocal[0]][2]&&(mazeLocalEle.removeClass("on"),mazeLocal[1]-=1,mazeStep++);else if(40==a.keyCode)1==e.data[mazeLocal[1]*o+mazeLocal[0]][4]&&(mazeLocalEle.removeClass("on"),mazeLocal[1]+=1,mazeStep++);else if(37==a.keyCode)1==e.data[mazeLocal[1]*o+mazeLocal[0]][5]&&(mazeLocalEle.removeClass("on"),mazeLocal[0]-=1,mazeStep++);else{if(39!=a.keyCode)return;1==e.data[mazeLocal[1]*o+mazeLocal[0]][3]&&(mazeLocalEle.removeClass("on"),mazeLocal[0]+=1,mazeStep++)}mazeLocalEle=p.eq(mazeLocal[1]*o+mazeLocal[0]),mazeLocalEle.addClass("on"),mazeLocal[0]==o-1&&mazeLocal[1]==m-1&&(mazeOver=!0,alert("你成功走出迷宫，共用"+mazeStep+"步"))}}),l.append(f)}})}(jQuery);