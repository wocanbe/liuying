!function(a){a.fn.extend({lyScroll:function(t,e,o){var n=["maxPage","localPage","error request！"],l=a(this),c=5,r=function(a){l.data(n[0],a.maxPage),o&&o(a.content),lyState=!0};e&&(c=e),l.data({localPage:1,maxPage:2});var d=function(){lyState=!1;var e=l.data(n[1])+1;l.data(n[1],e),a.ajax({url:t,type:"GET",data:{pageNo:e,pageCount:c},dataType:"json",success:r,error:function(){console.log(n[2])}})},u={ele:l,fun:d},i=function(){var t=a(document).scrollTop()+a(window).height()-u.ele.height()-u.ele.offset().top;t>0&&lyState&&l.data(n[0])>l.data(n[1])&&f()},f=function(){lyState=!1;var e=l.data(n[1])+1;l.data(n[1],e),a.ajax({url:t,type:"GET",data:{pageNo:e,pageCount:c},dataType:"json",success:function(a){l.data(n[0],a.maxPage),o&&o(a.content),lyState=!0,i()},error:function(){console.log(n[2])}})};return window.lyScroll||(window.lyScroll=[]),window.lyScroll.push(u),window.lyState=!0,a(window).scroll(function(){if(l.data(n[0])>l.data(n[1])&&lyState){var t=a(document).scrollTop()+a(window).height()-u.ele.height()-u.ele.offset().top;t>0&&u.fun()}}),i(),l}})}(jQuery);