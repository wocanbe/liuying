!function(a){a.fn.extend({lyScroll:function(e,t,o,l){var n=a(this),c=5,r=function(a){n.data("maxPage",a.maxPage),o&&o(a.content),lyState=!0},d=function(){console.log("error requestï¼")};l&&(d=l),t&&(c=t),n.data({localPage:1,maxPage:2});var g=function(){lyState=!1;var t=n.data("localPage")+1;n.data("localPage",t),a.ajax({url:e,type:"GET",data:{pageNo:t,pageCount:c},dataType:"json",success:r,error:d})},u={ele:n,fun:g},i=function(){var e=a(document).scrollTop()+a(window).height()-u.ele.height()-u.ele.offset().top;e>0&&lyState&&n.data("maxPage")>n.data("localPage")&&f()},f=function(){lyState=!1;var t=n.data("localPage")+1;n.data("localPage",t),a.ajax({url:e,type:"GET",data:{pageNo:t,pageCount:c},dataType:"json",success:function(a){n.data("maxPage",a.maxPage),o&&o(a.content),lyState=!0,i()},error:d})};return window.lyScroll||(window.lyScroll=[]),window.lyScroll.push(u),window.lyState=!0,a(window).scroll(function(){if(n.data("maxPage")>n.data("localPage")&&lyState){var e=a(document).scrollTop()+a(window).height()-u.ele.height()-u.ele.offset().top;e>0&&u.fun()}}),i(),n}})}(jQuery);