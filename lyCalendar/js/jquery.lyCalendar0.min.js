!function(t){t.fn.extend({lyCalendar:function(a,e,n,l){var i=t(this),o=new Date,s=new Date;s.setDate(1);var r={year:o.getFullYear(),month:o.getMonth(),date:o.getDate()},d=n?n:500,c=l?l:400,h=(window.screen.availHeight-30-c)/2,y=(window.screen.availWidth-10-d)/2,p="height="+c+",width="+d+",top="+h+",left="+y+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,fullscreen=0",w={},g={shown:s,local:o,ele:w,pro:function(){g.shown.setMonth(g.shown.getMonth()-1),u(g.shown.getFullYear(),g.shown.getMonth())},next:function(){g.shown.setMonth(g.shown.getMonth()+1),u(g.shown.getFullYear(),g.shown.getMonth())}},u=function(n,l){var i=new Date(n,l,1),o=!1,s=l>8?l+1:"0"+(l+1);r.year==n&&r.month==l&&(o=!0);var d=i.getDay();d>0&&i.setDate(1-d),t.ajax({url:a,type:"post",data:"month="+n+s,dataType:"json",success:function(a){for(var d=0,c=a.dates,h="",y=0;6>y;y++){h+="<ul>";for(var g=0;7>g;g++){var u=i.getDate(),m=u>9?u:"0"+u,v=i.getMonth(),f=v>8?v+1:"0"+(v+1),M=n+"-"+f+"-"+m;v==l?(o&&u==r.date?c[d]==u?(h+='<li class="local has2" title="'+M+'">',d++):h+='<li class="local" title="'+M+'">':c[d]==u?(h+='<li class="has" title="'+M+'">',d++):h+='<li title="'+M+'">',h+=m,h+="</li>"):(h+='<li class="gray" title="'+M+'">',h+=m,h+="</li>"),i.setDate(u+1)}if(h+="</ul>",i.getMonth()!=l)break}var D="date="+n+s,x=e.indexOf("?")>0?e+"&"+D:e+"?"+D;w.main.html(h).find(".has").click(function(){var a=x+t(this).html();window.open(a,window,p)}),w.main.find(".has2").click(function(){var a=x+t(this).html();window.open(a,window,p)})}})};window.lyCalendar=g;var m=function(){w.title=t('<div class="title"><i></i>今天 <span id="lyc_year"></span>/<span id="lyc_month"></span>/<span id="lyc_day"></span></div>'),w.year=w.title.find("#lyc_year"),w.month=w.title.find("#lyc_month"),w.day=w.title.find("#lyc_day"),i.append(w.title),w.pro=t('<div class="pro"></div>'),w.pro.click(g.pro),i.append(w.pro),w.next=t('<div class="next"></div>'),w.next.click(g.next),i.append(w.next);var a='<ul><li class="red">SUN</li>';a+='<li class="gray">MON</li>',a+='<li class="gray">TUE</li>',a+='<li class="gray">WED</li>',a+='<li class="gray">THU</li>',a+='<li class="gray">FRI</li>',a+='<li class="gray">SAT</li></ul>',w.tHead=t(a),i.append(w.tHead),w.main=t('<div id="lyc_main"></div>'),i.append(w.main),w.year.html(r.year),w.month.html(r.month>8?r.month+1:"0"+(r.month+1)),w.day.html(r.date>9?r.date:"0"+r.date)};return m(),u(o.getFullYear(),o.getMonth()),i}})}(jQuery);