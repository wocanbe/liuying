!function(a){a.fn.extend({lyCalendar:function(t,l){var e=a(this),n=new Date,i=new Date;i.setDate(1);var s={year:n.getFullYear(),month:n.getMonth(),date:n.getDate()},o={},r={shown:i,local:n,ele:o,pro:function(){r.shown.setMonth(r.shown.getMonth()-1),d(r.shown.getFullYear(),r.shown.getMonth())},next:function(){r.shown.setMonth(r.shown.getMonth()+1),d(r.shown.getFullYear(),r.shown.getMonth())}},d=function(e,n){var i=new Date(e,n,1),r=!1,d=n>8?n+1:"0"+(n+1);a("#lyc_lyear").html(e),a("#lyc_lmonth").html(d),s.year==e&&s.month==n&&(r=!0);var c=i.getDay();c>0&&i.setDate(1-c),a.ajax({url:t,type:"post",data:"month="+e+d,dataType:"json",success:function(a){for(var t=0,c=a.dates,h="",y="date="+e+d,p=l.indexOf("?")>0?l+"&"+y:l+"?"+y,g=0;6>g;g++){h+="<ul>";for(var m=0;7>m;m++){var u=i.getDate(),v=u>9?u:"0"+u,f=i.getMonth();f==n?(r&&u==s.date?c[t]==u?(h+='<li class="local has2"><a href="',h+=p+v+'" target="_blank">'+v+"</a>",t++):h+='<li class="local">'+v:c[t]==u?(h+='<li class="has"><a href="',h+=p+v+'" target="_blank">'+v+"</a>",t++):h+="<li>"+v,h+="</li>"):(h+='<li class="gray">',h+=v,h+="</li>"),i.setDate(u+1)}if(h+="</ul>",i.getMonth()!=n)break}o.main.html(h)}})};window.lyCalendar=r;var c=function(){o.title=a('<div class="title"><i></i><span id="lyc_lyear"></span>年<span id="lyc_lmonth"></span>月<div id="lyc_dates">今天 <span id="lyc_year"></span>/<span id="lyc_month"></span>/<span id="lyc_day"></span><div></div>'),o.year=o.title.find("#lyc_year"),o.month=o.title.find("#lyc_month"),o.day=o.title.find("#lyc_day"),e.append(o.title),o.pro=a('<div class="pro"></div>'),o.pro.click(r.pro),e.append(o.pro),o.next=a('<div class="next"></div>'),o.next.click(r.next),e.append(o.next);var t='<ul><li class="red">SUN</li>';t+='<li class="gray">MON</li>',t+='<li class="gray">TUE</li>',t+='<li class="gray">WED</li>',t+='<li class="gray">THU</li>',t+='<li class="gray">FRI</li>',t+='<li class="gray">SAT</li></ul>',o.tHead=a(t),e.append(o.tHead),o.main=a('<div id="lyc_main"></div>'),e.append(o.main),o.year.html(s.year),o.month.html(s.month>8?s.month+1:"0"+(s.month+1)),o.day.html(s.date>9?s.date:"0"+s.date)};return c(),d(n.getFullYear(),n.getMonth()),e}})}(jQuery);