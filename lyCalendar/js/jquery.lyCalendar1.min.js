!function(t){t.fn.extend({lyCalendar:function(a,e){var l=t(this),n=new Date,i=new Date;i.setDate(1);var s={year:n.getFullYear(),month:n.getMonth(),date:n.getDate()},o={},r={shown:i,local:n,ele:o,pro:function(){r.shown.setMonth(r.shown.getMonth()-1),d(r.shown.getFullYear(),r.shown.getMonth())},next:function(){r.shown.setMonth(r.shown.getMonth()+1),d(r.shown.getFullYear(),r.shown.getMonth())}},d=function(l,n){var i=new Date(l,n,1),r=!1,d=n>8?n+1:"0"+(n+1);s.year==l&&s.month==n&&(r=!0);var h=i.getDay();h>0&&i.setDate(1-h),t.ajax({url:a,type:"post",data:"month="+l+d,dataType:"json",success:function(t){for(var a=0,h=t.dates,c="",y="date="+l+d,p=e.indexOf("?")>0?e+"&"+y:e+"?"+y,g=0;6>g;g++){c+="<ul>";for(var u=0;7>u;u++){var m=i.getDate(),f=m>9?m:"0"+m,v=i.getMonth(),w=v>8?v+1:"0"+(v+1),M=l+"-"+w+"-"+f;v==n?(r&&m==s.date?h[a]==m?(c+='<li class="local has2" title="'+M+'"><a href="',c+=p+f+'" target="_blank">'+f+"</a>",a++):c+='<li class="local" title="'+M+'">'+f:h[a]==m?(c+='<li class="has" title="'+M+'"><a href="',c+=p+f+'" target="_blank">'+f+"</a>",a++):c+='<li title="'+M+'">'+f,c+="</li>"):(c+='<li class="gray" title="'+M+'">',c+=f,c+="</li>"),i.setDate(m+1)}if(c+="</ul>",i.getMonth()!=n)break}o.main.html(c)}})};window.lyCalendar=r;var h=function(){o.title=t('<div class="title"><i></i>今天 <span id="lyc_year"></span>/<span id="lyc_month"></span>/<span id="lyc_day"></span></div>'),o.year=o.title.find("#lyc_year"),o.month=o.title.find("#lyc_month"),o.day=o.title.find("#lyc_day"),l.append(o.title),o.pro=t('<div class="pro"></div>'),o.pro.click(r.pro),l.append(o.pro),o.next=t('<div class="next"></div>'),o.next.click(r.next),l.append(o.next);var a='<ul><li class="red">SUN</li>';a+='<li class="gray">MON</li>',a+='<li class="gray">TUE</li>',a+='<li class="gray">WED</li>',a+='<li class="gray">THU</li>',a+='<li class="gray">FRI</li>',a+='<li class="gray">SAT</li></ul>',o.tHead=t(a),l.append(o.tHead),o.main=t('<div id="lyc_main"></div>'),l.append(o.main),o.year.html(s.year),o.month.html(s.month>8?s.month+1:"0"+(s.month+1)),o.day.html(s.date>9?s.date:"0"+s.date)};return h(),d(n.getFullYear(),n.getMonth()),l}})}(jQuery);